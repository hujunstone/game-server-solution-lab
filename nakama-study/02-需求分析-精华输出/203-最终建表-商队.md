

1. npc 需要有哪些属性再确认一下
2. npc 应该也有个模板和实例 一旦雇佣相当于就创建了一个实例 一些属性值也应该随着游戏后期不断改变
依据表中的注释补充建表语句缺失的 COMMENT 
依据表中的注释补充建表语句缺失的 COMMENT
依据建表语句中的COMMENT补充表中缺失的注释

商队（商队成员）系统

### 6.1 职业/角色类型表（护卫、账房等）

```sql
-- 商队成员职业定义：护卫/账房/郎中/向导/脚夫/货匠
CREATE TABLE IF NOT EXISTS crew_role (
    crew_role_id UUID PRIMARY KEY DEFAULT gen_random_uuid(), -- 商队成员职业 ID
    code         STRING(32) UNIQUE NOT NULL,                 -- 职业代码 (guardian/accountant/doctor/guide/porter/storekeeper)
    name         STRING(32) NOT NULL,                        -- 职业显示名称（护卫/账房等）
    description  STRING(255)                                 -- 职业详细描述
);
COMMENT ON TABLE crew_role IS '商队成员职业定义：护卫/账房/郎中/向导/脚夫/货匠';
COMMENT ON COLUMN crew_role.crew_role_id IS '商队成员职业 ID';
COMMENT ON COLUMN crew_role.code IS '职业代码 (guardian/accountant/doctor/guide/porter/storekeeper)';
COMMENT ON COLUMN crew_role.name IS '职业显示名称（护卫/账房等）';
COMMENT ON COLUMN crew_role.description IS '职业详细描述';
```
商队成员 npc 模板 的配置，记录 npc 初始信息
```sql
CREATE TABLE IF NOT EXISTS crew_npc_template (
    crew_npc_template_id SERIAL PRIMARY KEY,      -- npc主键
    code STRING(32) NOT NULL UNIQUE,            -- 模板编码，例如 ACCOUNTANT_SU_MINGYUAN
    name STRING(32) NOT NULL,                  -- NPC 名称（苏明远、秦铁山等）
    role_code STRING(50) NOT NULL,              -- 职业编码：guard/accountant/doctor/guide/porter/custodian
    strength SMALLINT NOT NULL,                   -- 基础力量
    agility SMALLINT NOT NULL,                    -- 基础敏捷
    constitution SMALLINT NOT NULL,               -- 基础体质
    wisdom SMALLINT NOT NULL,                      -- 基础智慧
    wage INT NOT NULL,                             -- 基础工资（两）
    rarity STRING(20) NOT NULL,                   -- 品阶/稀有度，如 common/rare/epic
    skill_payload JSONB NULL,                       -- 预设技能与特性 JSON
    description STRING(255)                        -- 队员背景或数值说明
    );
COMMENT ON TABLE crew_npc_template IS '可招募/初始队员的静态模板配置';
COMMENT ON COLUMN crew_npc_template.crew_npc_template_id IS 'npc主键';
COMMENT ON COLUMN crew_npc_template.code IS '模板编码，例如 ACCOUNTANT_SU_MINGYUAN';
COMMENT ON COLUMN crew_npc_template.name IS 'NPC 名称（苏明远、秦铁山等）';
COMMENT ON COLUMN crew_npc_template.role_code IS '职业编码：guard/accountant/doctor/guide/porter/custodian';
COMMENT ON COLUMN crew_npc_template.strength IS '基础力量';
COMMENT ON COLUMN crew_npc_template.agility IS '基础敏捷';
COMMENT ON COLUMN crew_npc_template.constitution IS '基础体质';
COMMENT ON COLUMN crew_npc_template.wisdom IS '基础智慧';
COMMENT ON COLUMN crew_npc_template.wage IS '基础工资（两）';
COMMENT ON COLUMN crew_npc_template.rarity IS '品阶/稀有度，如 common/rare/epic';
COMMENT ON COLUMN crew_npc_template.skill_payload IS '预设技能与特性 JSON';
COMMENT ON COLUMN crew_npc_template.description IS '队员背景或数值说明';

```

角色已招募商队成员表
```sql
-- 角色已招募的商队成员 todo 补充模板信息 把 npc 模板字段直接 copy 到这里
CREATE TABLE IF NOT EXISTS character_npc_member (
    id              UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    character_id    UUID NOT NULL REFERENCES characters(id) ON DELETE CASCADE,
    crew_npc_template_id UUID NOT NULL REFERENCES caravan_npcs(id),
    slot_index      SMALLINT NOT NULL,  -- 在队伍中位置（1-5）
    hired_at        TIMESTAMPTZ NOT NULL DEFAULT now(),    -- 招募时间
    is_hired        BOOL NOT NULL DEFAULT true,            -- 当前是否已雇佣
    created_at      TIMESTAMPTZ NOT NULL DEFAULT now(),         -- 创建时间
    updated_at      TIMESTAMPTZ NOT NULL DEFAULT now(),         -- 更新时间
    UNIQUE (character_id, crew_npc_template_id)
);
COMMENT ON TABLE character_npc_member IS '角色已招募的商队成员列表';
COMMENT ON COLUMN character_npc_member.is_hired IS '是否处于已加入商队的状态（未解雇）';
```


---

角色与出身初始成员关系 
```sql
CREATE TABLE IF NOT EXISTS background_starting_crew (
    background_id INT NOT NULL REFERENCES background_archetype (background_id),
    crew_npc_template_id INT NOT NULL REFERENCES crew_template (crew_template_id),
    slot_index SMALLINT NOT NULL,
    PRIMARY KEY (background_id, slot_index)
);
COMMENT ON TABLE background_starting_crew IS '出身对应的初始队员配置';
COMMENT ON COLUMN background_starting_crew.background_id IS '角色出身 ID';
COMMENT ON COLUMN background_starting_crew.crew_npc_template_id IS '初始队员模板 ID';
COMMENT ON COLUMN background_starting_crew.slot_index IS '初始队伍中位置（1-5）';
```

各招募点可招募队员的候选池配置
```sql
CREATE TABLE IF NOT EXISTS crew_recruit_pool (
    trade_node_id UUID NOT NULL REFERENCES trade_node (trade_node_id),
    crew_npc_template_id INT NOT NULL REFERENCES crew_template (crew_template_id),
    min_reputation INT NOT NULL,
    max_reputation INT NULL,
    spawn_weight INT NOT NULL,
    PRIMARY KEY (trade_node_id, crew_npc_template_id)
);
COMMENT ON TABLE crew_recruit_pool IS '各招募点可招募队员的候选池配置';
COMMENT ON COLUMN crew_recruit_pool.trade_node_id IS '招募点所在贸易节点';
COMMENT ON COLUMN crew_recruit_pool.crew_npc_template_id IS '可出现的队员模板 ID';
COMMENT ON COLUMN crew_recruit_pool.min_reputation IS '最低声望要求，为空表示无限制';
COMMENT ON COLUMN crew_recruit_pool.max_reputation IS '最高声望要求，为空表示无限制';
COMMENT ON COLUMN crew_recruit_pool.spawn_weight IS '随机出现权重';
```


