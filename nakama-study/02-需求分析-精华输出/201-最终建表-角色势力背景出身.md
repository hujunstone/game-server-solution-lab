
5. 当前技能 是不是也需要一个表
4. 服饰是否需要一个套装，还是按照出身设置的，后期也许可以调整？如果可以调整可能要新建一个服饰的表了

1. appearance_type 是数字还是字符串比较好，考虑检索速度，什么情况下考虑数字什么情况下用字符串，感觉是枚举吧
   考虑可读性还行尽量多用string
2. nakama 的user_id 是字符串的还是 uuid
3. reputation 和 prestige 有什么区别，reputation游戏中更常用


# 1. 角色
角色主表 基础信息、外观、势力、出身
```sql 
-- 角色主表：基础信息、外观、势力、出身等
CREATE TABLE IF NOT EXISTS `character` (
    character_id    UUID PRIMARY KEY DEFAULT gen_random_uuid(), -- 角色ID
    user_id         UUID NOT NULL,                              -- 所属玩家ID（Nakama 用户ID）
    `name`          STRING(32) NOT NULL,                        -- 角色名称
    name_lang       STRING(8) NOT NULL DEFAULT 'zh',            -- 名字语言标识（zh/en等）
    gender          STRING(8) NOT NULL,                         -- 性别：male/female
    appearance_type STRING(16) NOT NULL,                        -- 外观预设：standard / strong
    faction_id      UUID NOT NULL REFERENCES factions(id),      -- 所属势力（Demo: 晋商）
    background_id   UUID NOT NULL REFERENCES backgrounds(id),   -- 出身背景
    `level`         INT  NOT NULL DEFAULT 1,                    -- 角色等级（预留）
    exp             BIGINT NOT NULL DEFAULT 0,                  -- 角色经验值（预留）
    status          STRING NOT NULL DEFAULT 'active',           -- 角色状态（active 启用, retired 停用, banned禁用）
    reputation_score  INT  NOT NULL DEFAULT 0,                  -- 在所属势力中的声望数值
    reputation_level  SMALLINT NOT NULL DEFAULT 0,              -- 在所属势力中声望中的等级
    description STRING(255),                                    -- 描述文案
    created_at      TIMESTAMPTZ NOT NULL DEFAULT now(),         -- 创建时间
    updated_at      TIMESTAMPTZ NOT NULL DEFAULT now(),         -- 更新时间
    UNIQUE (user_id, name)                                      -- 同一玩家下角色名唯一
);
COMMENT ON TABLE  `character` IS '玩家角色主表：基础信息、势力与出身';
COMMENT ON COLUMN  `character`.user_id         IS 'Nakama 用户ID';
COMMENT ON COLUMN  `character`.name            IS '角色名称（需前端做敏感词与长度校验）';
COMMENT ON COLUMN  `character`.name_lang       IS '角色名语言类型：zh=中文，en=英文';
COMMENT ON COLUMN  `character`.gender          IS '性别：male / female';
COMMENT ON COLUMN  `character`.appearance_type IS '外观预设类型：standard=标准型，strong=健壮型';
COMMENT ON COLUMN  `character`.faction_id      IS '所属势力ID（Demo中固定为晋商）';
COMMENT ON COLUMN  `character`.background_id   IS '角色出身背景ID';
COMMENT ON COLUMN  `character`.reputation_score  IS '在当前势力中的声望数值，用于映射声望等级';
COMMENT ON COLUMN  `character`.reputation_level IS '在所属势力中声望中的等级';
COMMENT ON COLUMN  `character`.status          IS '角色状态（active 启用, retired 停用, banned禁用）';
```



# 2. 势力 出身 
势力表（晋商等）
```sql
-- 势力表：如“晋商”等各大势力
CREATE TABLE IF NOT EXISTS faction (
    faction_id  UUID PRIMARY KEY DEFAULT gen_random_uuid(), -- 势力ID
    code        STRING(32) UNIQUE NOT NULL,                 -- 势力编码（如 JIN_SHANG）
    `name`      STRING(32) NOT NULL,                        -- 势力名称（如 晋商）
    home_city   STRING(64) NOT NULL,                        -- 出生地/大本营（如 太原府）
    icon_asset  STRING(255),                                -- 势力专属标识Icon 资源路径
    description STRING NULL                                 -- 势力说明文本;
    created_at  TIMESTAMPTZ NOT NULL DEFAULT now(),         -- 创建时间
    updated_at  TIMESTAMPTZ NOT NULL DEFAULT now()          -- 更新时间
);
COMMENT ON TABLE faction IS '势力表：定义如“晋商”这类势力信息';
COMMENT ON COLUMN faction.code       IS '势力编码（英文标识，用于程序内部引用）';
COMMENT ON COLUMN faction.name       IS '势力名称（如 晋商）';
COMMENT ON COLUMN faction.home_city  IS '势力默认出生地（如 太原府）';
COMMENT ON COLUMN faction.icon_asset IS '势力专属标识图标资源路径';
COMMENT ON COLUMN faction.description IS '势力说明文本';
```

出身背景表
```sql
-- 出身背景：落榜秀才 / 镖局趟子手 / 牙行牙侩
CREATE TABLE IF NOT EXISTS background (
    background_id UUID PRIMARY KEY DEFAULT gen_random_uuid(), -- 出身ID
    code        STRING(32) UNIQUE NOT NULL,                 -- 出身编码，如 LUOBANG_XIUCAI
    `name`      STRING(32) NOT NULL,                        -- 出身名称（落榜秀才等）
    description STRING(255),                                -- 描述文案
    default_strength SMALLINT NOT NULL,                     -- 初始力量
    default_agility SMALLINT NOT NULL,                      -- 初始敏捷
    default_constitution SMALLINT NOT NULL,                 -- 初始体质
    default_wisdom SMALLINT NOT NULL,                       -- 初始智慧
    starting_companion STRING NULL,                         -- 默认团队成员编码 [code_1, code_2...code_n]
    created_at  TIMESTAMPTZ NOT NULL DEFAULT now(),
    updated_at  TIMESTAMPTZ NOT NULL DEFAULT now()
);
COMMENT ON TABLE background IS '角色出身背景配置表（决定初始四维属性及初始队友）';
COMMENT ON COLUMN background_archetype.background_id IS '出身主键';
COMMENT ON COLUMN background_archetype.code IS '唯一出身编码，例如 LUOBANG_XIUCAI';
COMMENT ON COLUMN background_archetype.name IS '出身名称';
COMMENT ON COLUMN background_archetype.default_strength IS '初始力量';
COMMENT ON COLUMN background_archetype.default_agility IS '初始敏捷';
COMMENT ON COLUMN background_archetype.default_constitution IS '初始体质';
COMMENT ON COLUMN background_archetype.default_wisdom IS '初始智慧';
COMMENT ON COLUMN background_archetype.starting_companion IS '默认团队成员编码[code_1, code_2...code_n]';
```

势力声望等级表
```sql
-- 势力声望等级：无名 → 知名 → 尊敬 → 崇敬 → 传奇
CREATE TABLE IF NOT EXISTS reputation_level (
    id          UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    faction_id  UUID NOT NULL REFERENCES factions(id),  -- 所属势力
    `level`     INT  NOT NULL,                         -- 声望等级数值（1~5）
    `name`      STRING(32) NOT NULL,                   -- 等级名称（无名/知名/尊敬/崇敬/传奇）
    min_score   INT  NOT NULL,                         -- 达到该等级的最低声望值
    max_score   INT,                                   -- 该等级最大声望值（可留 NULL 表示无限）
    UNIQUE (faction_id, level)
);

COMMENT ON TABLE reputation_level IS '各势力的声望等级区间定义';
COMMENT ON COLUMN reputation_level.min_score IS '达到该声望等级需要的最低声望值';
COMMENT ON COLUMN reputation_level.max_score IS '该声望等级的最高声望值（可为空表示无上限）';
```
