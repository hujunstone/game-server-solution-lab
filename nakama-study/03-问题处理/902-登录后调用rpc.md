
先登录
{
    "created": true,
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0aWQiOiJmZTdkMjFjYS1lZTg3LTQ4MGUtOGJmOS1mNGQxNzY4OGNjOTIiLCJ1aWQiOiIxMmZhMzkzMy1kYjEzLTRkNmItODYyNy1lZjZiNDM3NThlZjQiLCJ1c24iOiJ0ZXN0dXNlciIsImV4cCI6MTc2NDkzNjE1MH0.DSYjdLfjU2lJaPOENDkdCx0TbIif8IRJlkWw3AGRleE",
    "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0aWQiOiJmZTdkMjFjYS1lZTg3LTQ4MGUtOGJmOS1mNGQxNzY4OGNjOTIiLCJ1aWQiOiIxMmZhMzkzMy1kYjEzLTRkNmItODYyNy1lZjZiNDM3NThlZjQiLCJ1c24iOiJ0ZXN0dXNlciIsImV4cCI6MTc2NDkzMjU1MH0.hXT7vjPl_rLC5i4pfpFQ19uzI-tymzW-OBkIQx0Gsb0"
}

rpc用token 
{
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0aWQiOiJjZWI0NGYxYi1mYmY0LTRkYTItOTFhMS1jOWRhZjQwNmQ5M2EiLCJ1aWQiOiIxMmZhMzkzMy1kYjEzLTRkNmItODYyNy1lZjZiNDM3NThlZjQiLCJ1c24iOiJ0ZXN0dXNlciIsImV4cCI6MTc2NDkzNjE5NX0.Qudr5eE3Ew-278UAyj2cn4dYh1hZKhlg9shGt9tJ3SM",
    "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0aWQiOiJjZWI0NGYxYi1mYmY0LTRkYTItOTFhMS1jOWRhZjQwNmQ5M2EiLCJ1aWQiOiIxMmZhMzkzMy1kYjEzLTRkNmItODYyNy1lZjZiNDM3NThlZjQiLCJ1c24iOiJ0ZXN0dXNlciIsImV4cCI6MTc2NDkzMjU5NX0.socGiN7fPtcMoxLild_40gU0tPzVs9WQufJVEg7k85M"
}

用玩家 Session Token 调 RPC

1. 先调用登录接口（比如 `/v2/account/authenticate/email`）拿到 `session.token`。  
2. 然后在 Postman 里：

   ```text
   POST http://192.168.50.66:7350/v2/rpc/demo_faction_get?unwrap=true
   ```

   - **Auth**：No Auth（不要 Basic）。
   - **Headers**：
     - `Content-Type: application/json`
     - `Authorization: Bearer <SESSION_TOKEN>`（只保留这一种 Authorization）。
   - **Body**：

     ```json
     {
       "code": "JINGSHANG"
     }
     ```

---

你现在的请求里既有 `Authorization: ••••••` 又启用了 Basic（`--auth-basic-username 'defaultkey'`），所以 Nakama 按 HTTP key 路径处理，但收到的 header 不符合期望，才报 `HTTP key invalid`。  
按上面任一方案把 **Authorization 头和 Auth 设置干净、只保留一种方式** 就可以了。