

网络游戏，使用 cockroachdb go 语言开发，Nakama 框架，只列出系统需要使用的表名和每个表的作用，表名使用单数名词，


网络游戏，使用 cockroachdb go 语言开发，Nakama 框架，只列出系统需要使用的表名和每个表的作用，表名使用单数名词，要求表的作用说明言简意赅，不丢失重要信息



网络游戏，使用 cockroachdb go 语言开发，Nakama 框架，只列出系统需要使用的表名和每个表的作用，表名使用单数名词，

网络游戏，使用 cockroachdb go 语言开发，Nakama 框架，只列出跑商系统相关的建表语句，要求添加必要的注释。





网络游戏，使用 cockroachdb go 语言开发，Nakama 框架，列出角色相关的建表语句，要求添加必要的注释。
需求如下
```md

## 角色与职业系统

### 1. 角色创建系统

#### 1.1 基础信息设计
*   **姓名**
    *   **输入规则**：简体中文（2-6字，适配明代姓名习惯），英文字符长度（3-12位）。
    *   **校验机制**：敏感词过滤，支持重复名检测。
*   **性别与外貌**
    *   **性别影响**：主要影响角色外观、部分时装和特定称号，不影响核心权限。
    *   **外貌预设**：暂时提供2组基础脸型/体型设定供玩家选择（脸型可以一种）。
        1.  **标准型**：比例均衡，肌肉线条流畅。
        2.  **健壮型**：肩宽膀厚，胸膛宽阔，充满力量感。
*   **服饰预设**
    *   预设一套晋商风格服饰，包含以下槽位（暂时可不支持按部件调整）：
        1.  服饰
        2.  腰带
        3.  鞋子
        4.  头部装饰
        5.  饰品
        6.  武器外观

#### 1.2 背景选择
*   **势力选择**
    *   Demo中只能选择 **晋商**，出生地为 **太原府**。
*   **出身背景**

| 出身背景 | 初始属性偏向 | 初始团队成员 |
| :--- | :--- | :--- |
| **落榜秀才** | 智慧 | 掌柜 苏明远（账房） |
| **镖局趟子手** | 力量 | 老镖师 秦铁山（护卫） |
| **牙行牙侩** | 敏捷 | 码头苦力 王大力（脚夫） |

---

### 2. 角色系统

#### 2.1 身份表征系统
*   **所属势力声望等级**：衡量角色在本势力内的地位（无名 → 知名 → 尊敬 → 崇敬 → 传奇）。
*   **所属势力专属标识**：需设计晋商专属标识 Icon。

#### 2.2 属性系统

**角色核心属性**
| 核心属性 | 初始值 | 主要影响 |
| :--- | :--- | :--- |
| **力量** | 10 | 近战伤害、防御 |
| **敏捷** | 10 | 远程伤害、躲避 |
| **体质** | 10 | 生命值 |
| **智慧** | 10 | 议价成功率，谈判成功率 |

**基础数值公式**
| 属性 | 公式 |
| :--- | :--- |
| **生命值（HP）** | `HP = 体质 × 10 + 力量 × 2` |
| **防御力（DEF）** | `DEF = 体质 × 3 + 力量 × 1` |
| **近战伤害** | `基础伤害 + 力量 × 1 + 武器` |
| **远程伤害** | `基础伤害 + 敏捷 × 1` |

**不同出身的基础属性值**
| 出身背景 | 力量 | 敏捷 | 体质 | 智慧 | 总计 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **落榜秀才** | 8（-2） | 8（-2） | 9（-1） | 15（+5） | 40 |
| **镖局趟子手** | 14（+4） | 9（-1） | 13（+3） | 4（-6） | 40 |
| **牙行牙侩** | 9（-1） | 14（+4） | 8（-2） | 9（-1） | 40 |

**生命值 & 防御示例**
| 角色 | HP计算 (`体质×10 + 力量×2`) | DEF计算 (`体质 + floor(力量/2)`) |
| :--- | :--- | :--- |
| **落榜秀才** | 9×10 + 8×2 = **106** | 9 + 4 = **13** |
| **镖局趟子手** | 13×10 + 14×2 = **158** | 13 + 7 = **20** |
| **牙行牙侩** | 8×10 + 9×2 = **98** | 8 + 4 = **12** |

#### 2.3 技能系统
技能分为主动技能和被动技能，以及可升级技能，最高为10级。

**商贾之道**
```text
商贾之道
│
├─ 识货 ─ 专精
│
├─ 议价 ─ 牙行通
│
└─ 打探 ─ 行情
```
*   **识货**：被动技能（无等级），提升购买量。
    *   公式：`购买量提升 = 基础值（3%） + （智慧 ×0.2）%`
*   **议价**：主动技能，影响商品的买入价和卖出价。
    *   公式：`价格浮动 = (智慧 ×0.1% + 技能等级 ×0.5%)`
    *   *例*：智慧15，等级5级，浮动为 `(1.5% + 2.5%) = 4%`（买入-4%，卖出+4%）。
*   **打探**：被动技能，从不同NPC口中获取不同的有用信息。
    *   公式：`打探成功率 = 基础成功率15% + 智慧 ×1% + 技能等级 ×3%`

**防卫之术**
```text
防卫之术
│
├─ 攻击 ─ 重劈 ─ 破甲
│
└─ 包扎 ─ 治疗 ─ 手术
```
*   **攻击**：主动技能，普通攻击。无冷却。
    *   伤害：`基础伤害40 + 力量 ×1 + 武器伤害值`
*   **重劈**：主动技能，高伤害的单体攻击。
    *   冷却：Lv0-2: 3回合 / Lv3-6: 2回合 / Lv7-10: 1回合
    *   伤害：`(基础伤害40 + 力量 ×1) × (1.0 + 技能等级 ×0.1)`
    *   额外效果：有概率击晕敌人，`击晕概率 = 10% + 技能等级 ×2%`
*   **破甲**：对目标发动一次精准打击，旨在破坏其护甲。
    *   伤害：`破甲伤害 = (基础伤害40 + 力量 ×1) × 0.9`
    *   效果：使目标的防御力降低。`降低防御 = 8 + 技能等级 ×2`
    *   持续时间：3回合。
    *   冷却：Lv0-3: 4回合 / Lv4-7: 3回合 / Lv8-10: 2回合
*   **包扎**：主动技能，无冷却。
    *   效果：`治疗 = 15 + 技能等级 × 2`，并清除【流血】状态。
*   **治疗**：主动技能，消耗1份金疮药，冷却3回合。
    *   效果：`恢复 30 + 技能等级 × 4`。
*   **手术**：主动技能，消耗1个麻沸散，冷却5回合。
    *   效果：`恢复 50 + 技能等级 × 5`；若目标HP<30%，额外恢复缺失生命值的30%。

**技能伤害计算示例（DEF=40）**
| 技能 | 普攻基础伤 | 技能伤害 | 实际伤害 (扣除DEF) | 额外效果 |
| :--- | :--- | :--- | :--- | :--- |
| **普攻** | 40+15=55 | 55 | 15 | — |
| **重劈** | 55 | 55×(1.0+0.5)=82.5 | 42.5 | 20%概率击晕 |
| **破甲** | 55 | 55×0.9 = 49.5 | 9.5 | 降防=18点 (DEF 40→22)<br>下回合普攻伤害 = 55-22=33 (+120%提升) |

#### 2.4 装备系统

**装备类型与属性方向**
| 装备位 | 主要加成属性 |
| :--- | :--- |
| 服饰 | 体质、力量 |
| 鞋子 | 体质、敏捷 |
| 饰品 | 敏捷 |
| 头部装饰 | 智慧 |
| 腰带 | 体质 |
| 武器 | 各个属性，伤害 |

**装备品质与数值标准**
*   普通（白）：+1~2 主属性
*   精良（绿）：+2~3 主属性
*   优质（蓝）：+3~4 主属性
*   稀有（紫）：+4~6 主属性
*   传说（橙）：+6~8 主属性 + 特效

**Demo出生绑定装备（白色品质）**
| 装备位 | 名称 | 类型 | 加成属性 | 描述 |
| :--- | :--- | :--- | :--- | :--- |
| 上衣 | 麻布短褐 | 布衣 | +1 体质 | 粗麻织就，洗得发白 |
| 下装 | 棉布裈裤 | 布裤 | +1 敏捷 | 宽松合身，便于行路 |
| 鞋子 | 编草鞋 | 鞋履 | +1 敏捷 | 轻便透气，适合赶路 |
| 头饰 | 青布头巾 | 头饰 | +1 智慧 | 方正青巾，书生常裹 |
| 腰带 | 棉布腰带 | 腰带 | +1 体质 | 双层棉布，可挂小囊 |
| 饰品 | 黄铜平安扣 | 饰品 | +1 智慧 | 刻“平安”二字 |

**出生绑定武器**
| 出身 | 武器名称 | 类型 | 属性加成 | 伤害加成 |
| :--- | :--- | :--- | :--- | :--- |
| 落榜秀才 | 青竹手杖 | 钝器 | +2 智慧 | +2 |
| 镖局趟子手 | 熟铁短刀 | 刀 | +2 力量 | +4 |
| 牙行学徒 | 黄杨算盘 | 奇门 | +2 智慧 | +2 |

#### 2.5 团队系统
商队角色分类：五大职业定位与核心价值，玩家每次最多带五个成员。

| 角色 | 核心职能 | 基础技能 |
| :--- | :--- | :--- |
| **护卫** | 抵御劫掠，保障商队安全 | **警戒巡逻**（被抢概率 - 5%） |
| **账房** | 议价集采，控制成本 | **精准记账**（采购成本 - 5%） |
| **郎中** | 治疗伤病，消除不良状态 | **草药救治**（解除成员伤病） |
| **向导** | 适配地形，提升效率 | **地形辨识**（迷路概率 - 5%） |
| **脚夫** | 承载货物，加大载货量 | **重物搬运**（载货量 + 5%） |
| **货匠** | 货物保管，降低途中损坏 | **货物保管**（损害事件概率 - 5%） |

**商队成员招募（Demo版）**
*   **招募点**：酒馆或驿站。
*   **流程**：
    1.  前往招募点。
    2.  NPC主动搭话介绍能力（如乡勇护卫、退役驿卒、私塾先生等）。
    3.  玩家确认“雇你了”，NPC报价（5-12两白银）。
    4.  扣除白银，NPC加入商队。

---
```


